{"version":3,"sources":["meteor://ðŸ’»app/packages/kadira_flow-router/packages/kadira_flow-router.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iG","file":"/packages/kadira_flow-router.js","sourcesContent":["(function () {\n\n//////////////////////////////////////////////////////////////////////////////////////\n//                                                                                  //\n// packages/kadira:flow-router/server/router.js                                     //\n//                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////\n                                                                                    //\nvar Qs = Npm.require('qs');                                                         // 1\n                                                                                    // 2\nRouter = function () {                                                              // 3\n  this._routes = [];                                                                // 4\n  this._routesMap = {};                                                             // 5\n  this.subscriptions = Function.prototype;                                          // 6\n};                                                                                  // 7\n                                                                                    // 8\nRouter.prototype.route = function(path, options) {                                  // 9\n  if (!/^\\/.*/.test(path)) {                                                        // 10\n    var message = \"route's path must start with '/'\";                               // 11\n    throw new Error(message);                                                       // 12\n  }                                                                                 // 13\n                                                                                    // 14\n  options = options || {};                                                          // 15\n  var route = new Route(this, path, options);                                       // 16\n  this._routes.push(route);                                                         // 17\n                                                                                    // 18\n  if (options.name) {                                                               // 19\n    this._routesMap[options.name] = route;                                          // 20\n  }                                                                                 // 21\n                                                                                    // 22\n  return route;                                                                     // 23\n};                                                                                  // 24\n                                                                                    // 25\nRouter.prototype.group = function(options) {                                        // 26\n  return new Group(this, options);                                                  // 27\n};                                                                                  // 28\n                                                                                    // 29\nRouter.prototype.path = function(pathDef, fields, queryParams) {                    // 30\n  if (this._routesMap[pathDef]) {                                                   // 31\n    pathDef = this._routesMap[pathDef].path;                                        // 32\n  }                                                                                 // 33\n                                                                                    // 34\n  fields = fields || {};                                                            // 35\n  var regExp = /(:[\\w\\(\\)\\\\\\+\\*\\.\\?]+)+/g;                                          // 36\n  var path = pathDef.replace(regExp, function(key) {                                // 37\n    var firstRegexpChar = key.indexOf(\"(\");                                         // 38\n    // get the content behind : and (\\\\d+/)                                         // 39\n    key = key.substring(1, (firstRegexpChar > 0)? firstRegexpChar: undefined);      // 40\n    // remove +?*                                                                   // 41\n    key = key.replace(/[\\+\\*\\?]+/g, \"\");                                            // 42\n                                                                                    // 43\n    return fields[key] || \"\";                                                       // 44\n  });                                                                               // 45\n                                                                                    // 46\n  path = path.replace(/\\/\\/+/g, \"/\"); // Replace multiple slashes with single slash // 47\n                                                                                    // 48\n  // remove trailing slash                                                          // 49\n  // but keep the root slash if it's the only one                                   // 50\n  path = path.match(/^\\/{1}$/) ? path: path.replace(/\\/$/, \"\");                     // 51\n                                                                                    // 52\n  var strQueryParams = Qs.stringify(queryParams || {});                             // 53\n  if(strQueryParams) {                                                              // 54\n    path += \"?\" + strQueryParams;                                                   // 55\n  }                                                                                 // 56\n                                                                                    // 57\n  return path;                                                                      // 58\n};                                                                                  // 59\n                                                                                    // 60\n                                                                                    // 61\nRouter.prototype.go = function() {                                                  // 62\n  // client only                                                                    // 63\n};                                                                                  // 64\n                                                                                    // 65\n                                                                                    // 66\nRouter.prototype.current = function() {                                             // 67\n  // client only                                                                    // 68\n};                                                                                  // 69\n                                                                                    // 70\n                                                                                    // 71\nRouter.prototype.triggers = {                                                       // 72\n  enter: function() {                                                               // 73\n    // client only                                                                  // 74\n  },                                                                                // 75\n  exit: function() {                                                                // 76\n    // client only                                                                  // 77\n  }                                                                                 // 78\n};                                                                                  // 79\n                                                                                    // 80\nRouter.prototype.middleware = function() {                                          // 81\n  // client only                                                                    // 82\n};                                                                                  // 83\n                                                                                    // 84\n                                                                                    // 85\nRouter.prototype.getState = function() {                                            // 86\n  // client only                                                                    // 87\n};                                                                                  // 88\n                                                                                    // 89\n                                                                                    // 90\nRouter.prototype.getAllStates = function() {                                        // 91\n  // client only                                                                    // 92\n};                                                                                  // 93\n                                                                                    // 94\n                                                                                    // 95\nRouter.prototype.setState = function() {                                            // 96\n  // client only                                                                    // 97\n};                                                                                  // 98\n                                                                                    // 99\n                                                                                    // 100\nRouter.prototype.removeState = function() {                                         // 101\n  // client only                                                                    // 102\n};                                                                                  // 103\n                                                                                    // 104\n                                                                                    // 105\nRouter.prototype.clearStates = function() {                                         // 106\n  // client only                                                                    // 107\n};                                                                                  // 108\n                                                                                    // 109\n                                                                                    // 110\nRouter.prototype.ready = function() {                                               // 111\n  // client only                                                                    // 112\n};                                                                                  // 113\n                                                                                    // 114\n                                                                                    // 115\nRouter.prototype.initialize = function() {                                          // 116\n  // client only                                                                    // 117\n};                                                                                  // 118\n                                                                                    // 119\nRouter.prototype.wait = function() {                                                // 120\n  // client only                                                                    // 121\n};                                                                                  // 122\n                                                                                    // 123\n//////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n//////////////////////////////////////////////////////////////////////////////////////\n//                                                                                  //\n// packages/kadira:flow-router/server/group.js                                      //\n//                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////\n                                                                                    //\nGroup = function(router, options) {                                                 // 1\n  options = options || {};                                                          // 2\n  this.prefix = options.prefix || '';                                               // 3\n                                                                                    // 4\n  this._router = router;                                                            // 5\n};                                                                                  // 6\n                                                                                    // 7\nGroup.prototype.route = function(path, options) {                                   // 8\n  path = this.prefix + path;                                                        // 9\n  return this._router.route(path, options);                                         // 10\n};                                                                                  // 11\n                                                                                    // 12\nGroup.prototype.group = function(options) {                                         // 13\n  var group = new Group(this._router, options);                                     // 14\n  group.parent = this;                                                              // 15\n                                                                                    // 16\n  return group;                                                                     // 17\n};                                                                                  // 18\n                                                                                    // 19\n//////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n//////////////////////////////////////////////////////////////////////////////////////\n//                                                                                  //\n// packages/kadira:flow-router/server/route.js                                      //\n//                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////\n                                                                                    //\nRoute = function(router, path, options) {                                           // 1\n  options = options || {};                                                          // 2\n  this.options = options;                                                           // 3\n                                                                                    // 4\n  this.path = path;                                                                 // 5\n  this.action = options.action || Function.prototype;                               // 6\n  this.subscriptions = options.subscriptions || Function.prototype;                 // 7\n  this._subsMap = {};                                                               // 8\n};                                                                                  // 9\n                                                                                    // 10\n                                                                                    // 11\nRoute.prototype.register = function(name, sub, options) {                           // 12\n  this._subsMap[name] = sub;                                                        // 13\n};                                                                                  // 14\n                                                                                    // 15\n                                                                                    // 16\nRoute.prototype.subscription = function(name) {                                     // 17\n  return this._subsMap[name];                                                       // 18\n};                                                                                  // 19\n                                                                                    // 20\n                                                                                    // 21\nRoute.prototype.middleware = function(middleware) {                                 // 22\n                                                                                    // 23\n};                                                                                  // 24\n                                                                                    // 25\n//////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n//////////////////////////////////////////////////////////////////////////////////////\n//                                                                                  //\n// packages/kadira:flow-router/server/_init.js                                      //\n//                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////\n                                                                                    //\n// Export Router Instance                                                           // 1\nFlowRouter = new Router();                                                          // 2\nFlowRouter.Router = Router;                                                         // 3\nFlowRouter.Route = Route;                                                           // 4\n                                                                                    // 5\n//////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n//////////////////////////////////////////////////////////////////////////////////////\n//                                                                                  //\n// packages/kadira:flow-router/server/plugins/fast_render.js                        //\n//                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////\n                                                                                    //\nif(!Package['meteorhacks:fast-render']) {                                           // 1\n  return;                                                                           // 2\n}                                                                                   // 3\n                                                                                    // 4\nFastRender = Package['meteorhacks:fast-render'].FastRender;                         // 5\n                                                                                    // 6\n// hack to run after eveything else on startup                                      // 7\nMeteor.startup(function () {                                                        // 8\n  Meteor.startup(function () {                                                      // 9\n    setupFastRender();                                                              // 10\n  });                                                                               // 11\n});                                                                                 // 12\n                                                                                    // 13\nfunction setupFastRender () {                                                       // 14\n  _.each(FlowRouter._routes, function (route) {                                     // 15\n    FastRender.route(route.path, function (routeParams, path) {                     // 16\n      var self = this;                                                              // 17\n                                                                                    // 18\n      // anyone using Meteor.subscribe for something else?                          // 19\n      var original = Meteor.subscribe;                                              // 20\n      Meteor.subscribe = function () {                                              // 21\n        return _.toArray(arguments);                                                // 22\n      };                                                                            // 23\n                                                                                    // 24\n      route._subsMap = {};                                                          // 25\n      FlowRouter.subscriptions.call(route, path);                                   // 26\n      if(route.subscriptions) {                                                     // 27\n        var queryParams = routeParams.query;                                        // 28\n        var params = _.omit(routeParams, 'query');                                  // 29\n        route.subscriptions(params, queryParams);                                   // 30\n      }                                                                             // 31\n      _.each(route._subsMap, function (args) {                                      // 32\n        self.subscribe.apply(self, args);                                           // 33\n      });                                                                           // 34\n                                                                                    // 35\n      // restore Meteor.subscribe, ... on server side                               // 36\n      Meteor.subscribe = original;                                                  // 37\n    });                                                                             // 38\n  });                                                                               // 39\n}                                                                                   // 40\n                                                                                    // 41\n//////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}